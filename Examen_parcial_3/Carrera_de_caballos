import random

def crear_baraja():
    """Crea una baraja española sin ochos ni nueves."""
    palos = {'oros': '🟡', 'copas': '🍷', 'espadas': '⚔️', 'bastos': '🌿'}
    valores = [1, 2, 3, 4, 5, 6, 7, 10, 11, 12]
    return [(valor, palo, f"{valor}{simbolo}") for palo, simbolo in palos.items() for valor in valores]

def barajar(baraja):
    """Baraja las cartas."""
    random.shuffle(baraja)

def inicializar_carrera():
    """Inicializa los caballos en la posición de salida."""
    return {'oros': 0, 'copas': 0, 'espadas': 0, 'bastos': 0}

def mostrar_pista(caballos):
    """Muestra la pista de la carrera."""
    print("\nPista de carrera:")
    for palo, posicion in caballos.items():
        print(f"{palo.capitalize()} ({'🐴' + '—' * posicion}🏁)")

def jugar_carrera():
    """Ejecuta la carrera de caballos con apuestas."""
    baraja = crear_baraja()
    barajar(baraja)
    caballos = inicializar_carrera()
    cartas_fuera = []
    
    print("Bienvenido a la carrera de caballos con naipes!\n")
    eleccion = input("Apuesta por un caballo (oros, copas, espadas, bastos): ").strip().lower()
    while eleccion not in caballos:
        eleccion = input("Opción inválida. Ingresa un palo válido (oros, copas, espadas, bastos): ").strip().lower()
    
    input("Presiona ENTER para iniciar la carrera...")
    
    meta = 10  # Definir la meta para los caballos
    ganador = None
    
    while not ganador:
        carta = baraja.pop()
        cartas_fuera.append(carta[2])
        if carta[1] in caballos:
            caballos[carta[1]] += 1
            print(f"Salió la carta {carta[2]} -> {carta[1].capitalize()} avanza!")
        mostrar_pista(caballos)
        
        if caballos[carta[1]] >= meta:
            ganador = carta[1]
        
        input("Presiona ENTER para continuar...")
    
    print(f"\nEl caballo {ganador.capitalize()} ha ganado la carrera! 🏆")
    print("Cartas jugadas en la carrera:", ' '.join(cartas_fuera))
    
    if ganador == eleccion:
        print("¡Felicidades! Tu caballo ganó la apuesta!")
    else:
        print("Lo siento, tu caballo no ganó esta vez.")

if __name__ == "__main__":
    jugar_carrera()
